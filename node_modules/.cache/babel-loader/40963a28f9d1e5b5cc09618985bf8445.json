{"ast":null,"code":"var _jsxFileName = \"/home/cracked/Desktop/Ascension XX/src/Components/Registration.js\";\nimport React, { Component } from 'react';\nimport firebase from 'firebase';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport Swal from 'sweetalert2';\nimport fireconfig from '../config/firebase.config'; //import Registration from './Registration'\n\nimport Aux from './Aux';\nimport Modal from './Modal';\nimport Logo from './Logo';\nimport EventCards from './EventCards';\nimport './assets/css/Registration.css';\nfirebase.initializeApp(fireconfig);\n\nclass Registration extends Component {\n  constructor(props) {\n    super(props);\n    this.uiConfig = {\n      signInFlow: \"redirect\",\n      signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID],\n      callbacks: {\n        signInSuccess: () => false\n      }\n    };\n\n    this.componentDidMount = () => {\n      firebase.auth().onAuthStateChanged(user => {\n        this.setState({\n          isSignedIn: !!user\n        });\n\n        if (!!user) {\n          document.getElementById(\"root\").style.display = \"none\";\n          document.getElementById(\"loader\").style.display = \"block\";\n          firebase.database().ref('/participants/' + user.uid).once('value').then(snapshot => {\n            document.getElementById(\"loader\").style.display = \"none\";\n            document.getElementById(\"root\").style.display = \"block\";\n\n            if (snapshot.val() !== null) {\n              this.setState({\n                user: snapshot.val(),\n                isUserCreated: true\n              });\n            } else {\n              this.setState({\n                tempName: user.displayName,\n                isUserCreated: false\n              });\n            }\n          }).catch(e => console.log(e.message));\n        }\n      });\n    };\n\n    this.modalClosedHandler = () => {\n      window.location.href = '/events/general';\n    };\n\n    this.capitalize = str => {\n      let splitStr = str.toLowerCase().split(' ');\n\n      for (let i = 0; i < splitStr.length; i++) {\n        splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);\n      }\n\n      return splitStr.join(' ');\n    };\n\n    this.collegeNameChangeHandler = event => {\n      let tpClg = this.capitalize(event.target.value);\n      this.setState({\n        tempCollege: tpClg\n      });\n    };\n\n    this.mobileNumberChangeHandler = event => {\n      this.setState({\n        tempMobile: event.target.value\n      });\n    };\n\n    this.nameChangeHandler = event => {\n      let tpNm = this.capitalize(event.target.value);\n      this.setState({\n        tempName: tpNm\n      });\n    };\n\n    this.formatDyuthiId = did => {\n      let final;\n      const digs = did.toString().length;\n\n      switch (digs) {\n        case 1:\n          final = 'DYT00' + did;\n          break;\n\n        case 2:\n          final = 'DYT0' + did;\n          break;\n\n        default:\n          final = 'DYT' + did;\n      }\n\n      return final;\n    };\n\n    this.formSubmitHandler = event => {\n      const regex = /^\\d{10}$/;\n\n      if (regex.test(this.state.tempMobile)) {\n        const currentUser = firebase.auth().currentUser;\n        firebase.database().ref('/participant_count').transaction(count => {\n          let dyId = count + 1;\n          dyId = this.formatDyuthiId(dyId);\n          const tempUser = {\n            uid: currentUser.uid,\n            dyuthi_id: dyId,\n            name: this.state.tempName,\n            email: currentUser.email,\n            mobile: this.state.tempMobile,\n            college: this.state.tempCollege\n          };\n          firebase.database().ref('/participants/' + currentUser.uid).set(tempUser).then(() => {\n            this.setState({\n              isUserCreated: true,\n              user: tempUser\n            });\n          }).catch(e => console.log(e.message));\n          return count + 1;\n        });\n      } else {\n        Swal.fire({\n          icon: 'error',\n          title: 'Invalid Mobile Number',\n          text: 'Enter valid mobile number without country code',\n          confirmButtonColor: '#A90C35'\n        });\n        this.setState({\n          tempMobile: ''\n        });\n      }\n\n      event.preventDefault();\n    };\n\n    this.state = {\n      isSignedIn: !!firebase.auth().currentUser,\n      isUserCreated: false,\n      user: null,\n      tempCollege: '',\n      tempMobile: '',\n      tempName: ''\n    };\n  }\n\n  render() {\n    return React.createElement(Aux, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      show: !this.state.isSignedIn,\n      modalClosed: this.modalClosedHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"ModalInner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(Logo, {\n      size: 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Login to Ascension\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Login to Ascension with your Google Account for Event Registration\"), React.createElement(StyledFirebaseAuth, {\n      uiConfig: this.uiConfig,\n      firebaseAuth: firebase.auth(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }))), React.createElement(Modal, {\n      show: this.state.isSignedIn && !this.state.isUserCreated,\n      modalClosed: this.modalClosedHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"ModalInner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Logo, {\n      size: 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Fill Your Personal Details\"), React.createElement(\"form\", {\n      className: \"SignupForm\",\n      netlify: true,\n      \"netlify-honeypot\": \"bot-field\",\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Your Name\",\n      value: this.state.tempName,\n      onChange: this.nameChangeHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Enter College Name\",\n      value: this.state.tempCollege,\n      onChange: this.collegeNameChangeHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"tel\",\n      placeholder: \"Enter Mobile Number\",\n      value: this.state.tempMobile,\n      onChange: this.mobileNumberChangeHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      onClick: this.formSubmitHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    })))), React.createElement(EventCards, {\n      show: this.state.isUserCreated,\n      user: this.state.user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Registration;","map":{"version":3,"sources":["/home/cracked/Desktop/Ascension XX/src/Components/Registration.js"],"names":["React","Component","firebase","StyledFirebaseAuth","Swal","fireconfig","Aux","Modal","Logo","EventCards","initializeApp","Registration","constructor","props","uiConfig","signInFlow","signInOptions","auth","GoogleAuthProvider","PROVIDER_ID","callbacks","signInSuccess","componentDidMount","onAuthStateChanged","user","setState","isSignedIn","document","getElementById","style","display","database","ref","uid","once","then","snapshot","val","isUserCreated","tempName","displayName","catch","e","console","log","message","modalClosedHandler","window","location","href","capitalize","str","splitStr","toLowerCase","split","i","length","charAt","toUpperCase","substring","join","collegeNameChangeHandler","event","tpClg","target","value","tempCollege","mobileNumberChangeHandler","tempMobile","nameChangeHandler","tpNm","formatDyuthiId","did","final","digs","toString","formSubmitHandler","regex","test","state","currentUser","transaction","count","dyId","tempUser","dyuthi_id","name","email","mobile","college","set","fire","icon","title","text","confirmButtonColor","preventDefault","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport firebase from 'firebase';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport Swal from 'sweetalert2';\n\nimport fireconfig from '../config/firebase.config';\n//import Registration from './Registration'\nimport Aux from './Aux';\nimport Modal from './Modal';\nimport Logo from './Logo';\nimport EventCards from './EventCards';\nimport './assets/css/Registration.css';\n\nfirebase.initializeApp(fireconfig);\n\n\nclass Registration extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { \n            isSignedIn: !!firebase.auth().currentUser,\n            isUserCreated: false,\n            user: null,\n            tempCollege: '',\n            tempMobile: '',\n            tempName: ''\n         }\n    }\n\n    uiConfig = {\n        signInFlow: \"redirect\",\n        signInOptions: [\n          firebase.auth.GoogleAuthProvider.PROVIDER_ID\n        ],\n        callbacks: {\n          signInSuccess: () => false\n        }\n    }\n\n    componentDidMount = () => {\n        firebase.auth().onAuthStateChanged(user => {\n            this.setState({isSignedIn: !!user});\n            if (!!user){\n                document.getElementById(\"root\").style.display = \"none\";\n                document.getElementById(\"loader\").style.display = \"block\";\n                firebase.database().ref('/participants/'+user.uid)\n                    .once('value').then((snapshot) => {\n                        document.getElementById(\"loader\").style.display = \"none\";\n                        document.getElementById(\"root\").style.display = \"block\";\n                        if (snapshot.val() !== null) {\n                            this.setState({user: snapshot.val(), isUserCreated: true});\n                        }else{\n                            this.setState({tempName: user.displayName, isUserCreated: false});\n                        }\n                    }).catch(e => console.log(e.message));\n            }\n        })\n    }\n\n    modalClosedHandler = () => {\n        window.location.href = '/events/general';\n    }\n\n    capitalize = (str) => {\n        let splitStr = str.toLowerCase().split(' ');\n        for (let i = 0; i < splitStr.length; i++){\n            splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);\n        }\n        return splitStr.join(' ');\n    }\n\n    collegeNameChangeHandler = (event) => {\n        let tpClg = this.capitalize(event.target.value);\n        this.setState({tempCollege: tpClg});\n    }\n\n    mobileNumberChangeHandler = (event) => {\n        this.setState({tempMobile: event.target.value});\n    }\n\n    nameChangeHandler = (event) => {\n        let tpNm = this.capitalize(event.target.value);\n        this.setState({tempName: tpNm});\n    }\n\n    formatDyuthiId = (did) => {\n        let final;\n        const digs = did.toString().length;\n        switch (digs) {\n            case 1:\n                final = 'DYT00'+did;\n                break;\n            case 2:\n                final = 'DYT0'+did;\n                break;\n            default:\n                final = 'DYT'+did;\n        }\n        return final;\n    }\n\n    formSubmitHandler = (event) => {\n        const regex = /^\\d{10}$/;\n        if (regex.test(this.state.tempMobile)) {\n            const currentUser = firebase.auth().currentUser;\n            firebase.database().ref('/participant_count').transaction((count) => {\n                let dyId = count+1;\n                dyId = this.formatDyuthiId(dyId);\n                const tempUser = {\n                    uid: currentUser.uid,\n                    dyuthi_id: dyId,\n                    name: this.state.tempName,\n                    email: currentUser.email,\n                    mobile: this.state.tempMobile,\n                    college: this.state.tempCollege\n                };\n                firebase.database().ref('/participants/'+currentUser.uid).set(tempUser).then(() => {\n                    this.setState({isUserCreated: true, user: tempUser});\n                }).catch(e => console.log(e.message));\n                return count+1;\n            });\n        }else{\n            Swal.fire({\n                icon: 'error',\n                title: 'Invalid Mobile Number',\n                text: 'Enter valid mobile number without country code',\n                confirmButtonColor: '#A90C35'\n            });              \n            this.setState({tempMobile: ''});\n        }\n        event.preventDefault();\n    }\n\n    render() { \n        return ( \n            <Aux>\n                <Modal show={!this.state.isSignedIn} modalClosed={this.modalClosedHandler}>\n                    <div className=\"ModalInner\">\n                        <Logo size={0}/>\n                        <h3>Login to Ascension</h3>\n                        <span>Login to Ascension with your Google Account for Event Registration</span>\n                        <StyledFirebaseAuth \n                            uiConfig={this.uiConfig}\n                            firebaseAuth={firebase.auth()}/>\n                    </div>\n                </Modal>\n                <Modal show={this.state.isSignedIn && !this.state.isUserCreated}  modalClosed={this.modalClosedHandler}>\n                    <div className=\"ModalInner\">\n                        <Logo size={0}/>\n                        <h3>Fill Your Personal Details</h3>\n                        <form className=\"SignupForm\" netlify netlify-honeypot=\"bot-field\" hidden>\n                            <input \n                                type=\"text\" \n                                placeholder=\"Your Name\"\n                                value={this.state.tempName} \n                                onChange={this.nameChangeHandler}/>\n                            <input \n                                type=\"text\" \n                                placeholder=\"Enter College Name\"\n                                value={this.state.tempCollege} \n                                onChange={this.collegeNameChangeHandler}/>\n                            <input \n                                type=\"tel\" \n                                placeholder=\"Enter Mobile Number\"\n                                value={this.state.tempMobile}\n                                onChange={this.mobileNumberChangeHandler}/>\n                            <input \n                                type=\"submit\" \n                                value=\"Submit\" \n                                onClick={this.formSubmitHandler}/>\n                        </form>\n                    </div>\n                </Modal>\n                <EventCards \n                    show={this.state.isUserCreated}\n                    user={this.state.user}/>\n            </Aux>\n         );\n    }\n}\n \nexport default Registration;"]},"metadata":{},"sourceType":"module"}