{"ast":null,"code":"import _classCallCheck from\"/home/cracked/Desktop/Ascension XX/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/cracked/Desktop/Ascension XX/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/cracked/Desktop/Ascension XX/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/cracked/Desktop/Ascension XX/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/cracked/Desktop/Ascension XX/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/cracked/Desktop/Ascension XX/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Switch,Link,Route}from\"react-router-dom\";import firebase from'firebase';import TabbedLayout from'./TabbedLayout';import'./assets/css/events.css';import GenEvents from'./GenEvents';import DeptEvents from'./DeptEvents';import Workshops from'./Workshops';import ModalBox from'./ModalBox';var EventPage=/*#__PURE__*/function(_Component){_inherits(EventPage,_Component);function EventPage(props){var _this;_classCallCheck(this,EventPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(EventPage).call(this,props));_this.state={currentPage:0,isModalOpen:false,deptEvents:[],genEvents:[],modalEvent:{title:'',desc:''}};_this.toggleModal=_this.toggleModal.bind(_assertThisInitialized(_this));_this.updateCurrentPage=_this.updateCurrentPage.bind(_assertThisInitialized(_this));_this.fetchEvents=_this.fetchEvents.bind(_assertThisInitialized(_this));_this.sortEvents=_this.sortEvents.bind(_assertThisInitialized(_this));return _this;}_createClass(EventPage,[{key:\"toggleModal\",value:function toggleModal(event){if(event==null){this.setState({isModalOpen:!this.state.isModalOpen});}else{this.setState({isModalOpen:!this.state.isModalOpen,modalEvent:event});}}},{key:\"updateCurrentPage\",value:function updateCurrentPage(pageNo){this.setState({currentPage:pageNo});}},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchEvents();}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(TabbedLayout,{currentPage:this.state.currentPage,isMobile:this.props.isMobile}),React.createElement(ModalBox,{show:this.state.isModalOpen,onClose:this.toggleModal,event:this.state.modalEvent}),React.createElement(Switch,null,React.createElement(Route,{exact:true,path:\"/events/general\"},React.createElement(\"div\",null,React.createElement(\"h3\",{className:\"page-title\",id:\"loading\"}),React.createElement(GenEvents,{modalToggle:this.toggleModal,updateCurrentPage:this.updateCurrentPage,events:this.state.genEvents}))),React.createElement(Route,{exact:true,path:\"/events/dept\"},React.createElement(\"div\",null,React.createElement(\"h3\",{className:\"page-title\",id:\"loading\"}),React.createElement(DeptEvents,{modalToggle:this.toggleModal,updateCurrentPage:this.updateCurrentPage,events:this.state.deptEvents}))),this.props.isMobile?React.createElement(Route,{exact:true,path:\"/events/workshops\"},React.createElement(Workshops,{isMobile:this.props.isMobile,updateCurrentPage:this.updateCurrentPage})):React.createElement(React.Fragment,null)));}},{key:\"fetchEvents\",value:function fetchEvents(){var _this2=this;var database=firebase.database();var depts={mech:\"Mechanical\",ce:\"Civil\",eee:\"Electrical\",chem:\"Chemical\",prod:\"Production\",cse:\"Computer Science\",ec:\"Electronics\",arch:\"Architecture\",mca:\"MCA\"};database.ref(\"/events/\").once('value').then(function(snapshot){var snaps=snapshot.val();var data=[];var genEvents=[];var deptEvents={};var count=0;for(var row in snaps){var event=snaps[row];data.push(event);if(event.is_department){var dept=event.department;var deptName=depts[dept.toLowerCase()];if(Object.keys(deptEvents).indexOf(deptName)>=0){deptEvents[deptName].push(event);}else{deptEvents[deptName]=[event];}if(deptName===\"Computer Science\")count+=1;}else if(event.is_department==\"\"&&event.department==\"\"){// do nothing\n}else{genEvents.push(event);}}if(data.length<=0){_this2.setState({deptEvents:[],genEvents:[]});document.getElementById(\"loading\").innerText=\"Coming Soon\";return;}else{var sortedDeptEvents=_this2.sortEvents(deptEvents);_this2.setState({deptEvents:sortedDeptEvents,genEvents:genEvents});}// console.log(\"gen\", genEvents);\n// console.log(\"dept\", deptEvents);\n// document.getElementById(\"loading\").style.display = \"none\";\n});}},{key:\"sortEvents\",value:function sortEvents(eventList){var deptList=Object.keys(eventList);var sortedList=new Object();deptList.sort();for(var _i=0,_deptList=deptList;_i<_deptList.length;_i++){var dept=_deptList[_i];sortedList[dept]=eventList[dept];}return sortedList;}}]);return EventPage;}(Component);export default EventPage;","map":{"version":3,"sources":["/home/cracked/Desktop/Ascension XX/src/Components/EventPage.js"],"names":["React","Component","Switch","Link","Route","firebase","TabbedLayout","GenEvents","DeptEvents","Workshops","ModalBox","EventPage","props","state","currentPage","isModalOpen","deptEvents","genEvents","modalEvent","title","desc","toggleModal","bind","updateCurrentPage","fetchEvents","sortEvents","event","setState","pageNo","isMobile","database","depts","mech","ce","eee","chem","prod","cse","ec","arch","mca","ref","once","then","snapshot","snaps","val","data","count","row","push","is_department","dept","department","deptName","toLowerCase","Object","keys","indexOf","length","document","getElementById","innerText","sortedDeptEvents","eventList","deptList","sortedList","sort"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n    Switch,\n    Link,\n    Route} from \"react-router-dom\";\nimport firebase from 'firebase';\n\nimport TabbedLayout from './TabbedLayout';\n\nimport './assets/css/events.css';\nimport GenEvents from './GenEvents';\nimport DeptEvents from './DeptEvents';\nimport Workshops from './Workshops';\nimport ModalBox from './ModalBox';\n\nclass EventPage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { \n            currentPage: 0,\n            isModalOpen: false,\n            deptEvents: [],\n            genEvents: [],\n            modalEvent: {\n                title: '',\n                desc: ''\n            } }\n        this.toggleModal = this.toggleModal.bind(this);\n        this.updateCurrentPage = this.updateCurrentPage.bind(this);\n        this.fetchEvents = this.fetchEvents.bind(this);\n        this.sortEvents = this.sortEvents.bind(this);\n    }\n    toggleModal(event){\n        if(event==null){\n            this.setState({\n                isModalOpen: !this.state.isModalOpen\n            });\n        }else{\n            this.setState({\n                isModalOpen: !this.state.isModalOpen,\n                modalEvent: event\n            });\n        }\n    }\n    updateCurrentPage(pageNo){\n        this.setState({\n            currentPage: pageNo\n        });\n    }\n    componentDidMount(){\n        this.fetchEvents();\n    }\n    render() { \n        return ( \n            <div>\n                <TabbedLayout currentPage={this.state.currentPage}\n                             isMobile={this.props.isMobile} />\n                <ModalBox \n                    show={this.state.isModalOpen}\n                    onClose={this.toggleModal}\n                    event={this.state.modalEvent}/>\n                <Switch>\n                    <Route exact path=\"/events/general\">\n                        <div>\n                            <h3 className=\"page-title\" id=\"loading\"></h3>\n                            <GenEvents \n                                modalToggle={this.toggleModal}\n                                updateCurrentPage={this.updateCurrentPage}\n                                events={this.state.genEvents}/>\n                        </div>\n                    </Route>\n                    <Route exact path=\"/events/dept\">\n                        <div>\n                            <h3 className=\"page-title\" id=\"loading\"></h3>\n                            <DeptEvents\n                                modalToggle={this.toggleModal}\n                                updateCurrentPage={this.updateCurrentPage}\n                                events={this.state.deptEvents}/>\n                        </div>\n                    </Route>\n                    {this.props.isMobile? <Route exact path=\"/events/workshops\">\n                                            <Workshops\n                                                isMobile={this.props.isMobile}\n                                                updateCurrentPage={this.updateCurrentPage}/>\n                                        </Route>\n                                        : <></>}\n                </Switch>\n            </div>\n         );\n    }\n    fetchEvents(){\n        var database = firebase.database();\n        const depts = {\n            mech: \"Mechanical\",\n            ce: \"Civil\",\n            eee: \"Electrical\",\n            chem: \"Chemical\",\n            prod: \"Production\", \n            cse: \"Computer Science\", \n            ec: \"Electronics\",\n            arch: \"Architecture\" ,\n            mca: \"MCA\"\n        }\n        database.ref(\"/events/\").once('value').then( (snapshot)=>{\n            const snaps = snapshot.val();\n            var data = [];\n            var genEvents = [];\n            var deptEvents = {};\n            var count = 0;\n            for( let row in snaps){\n                let event = snaps[row]\n                data.push(event);\n                if(event.is_department){\n                    let dept = event.department;\n                    let deptName = depts[dept.toLowerCase()]\n                    if(Object.keys(deptEvents).indexOf(deptName) >= 0){\n                        deptEvents[deptName].push(event);\n                    }else{\n                        deptEvents[deptName] = [event,];\n                    }\n                    if( deptName === \"Computer Science\")\n                        count += 1\n                }else if(event.is_department == \"\" && event.department == \"\"){\n                    // do nothing\n                }else{\n                    genEvents.push(event);\n                }\n            }\n            if(data.length <= 0){\n                this.setState({\n                    deptEvents: [],\n                    genEvents: []\n                });\n                document.getElementById(\"loading\").innerText = \"Coming Soon\";\n                return;\n            }else{\n                var sortedDeptEvents = this.sortEvents(deptEvents)\n                this.setState({\n                    deptEvents: sortedDeptEvents,\n                    genEvents: genEvents\n                });\n            }\n            // console.log(\"gen\", genEvents);\n            // console.log(\"dept\", deptEvents);\n            // document.getElementById(\"loading\").style.display = \"none\";\n        })\n    }\n    sortEvents(eventList){\n        let deptList = Object.keys(eventList)\n        let sortedList = new Object()\n        deptList.sort()\n\n        for( let dept of deptList){\n            sortedList[dept] = eventList[dept]\n        }\n        return sortedList;\n    }\n}\n \nexport default EventPage;"]},"metadata":{},"sourceType":"module"}